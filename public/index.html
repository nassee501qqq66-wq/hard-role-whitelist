<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hard Role | Whitelist</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #060a10;
    --surface: #0d1520;
    --surface2: #111d2e;
    --blue: #3b9eff;
    --blue-glow: #1e6fff;
    --blue-light: #7ec8ff;
    --text: #e8f4ff;
    --muted: #6a8caa;
    --border: #1a3050;
    --success: #00e5a0;
    --danger: #ff4560;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Rajdhani', 'Cairo', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Background grid effect */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background:
      linear-gradient(rgba(59,158,255,0.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(59,158,255,0.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  /* Glow orbs */
  .orb {
    position: fixed;
    border-radius: 50%;
    filter: blur(100px);
    pointer-events: none;
    z-index: 0;
  }
  .orb1 { width: 400px; height: 400px; background: rgba(30,111,255,0.12); top: -100px; left: -100px; }
  .orb2 { width: 300px; height: 300px; background: rgba(59,158,255,0.08); bottom: 100px; right: -50px; }

  .container {
    position: relative;
    z-index: 1;
    max-width: 760px;
    margin: 0 auto;
    padding: 40px 20px 80px;
  }

  /* Language Toggle */
  .lang-toggle {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 30px;
    gap: 8px;
  }
  .lang-btn {
    padding: 6px 18px;
    border-radius: 4px;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--muted);
    cursor: pointer;
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.2s;
    letter-spacing: 1px;
  }
  .lang-btn.active {
    background: var(--blue);
    border-color: var(--blue);
    color: #fff;
  }

  /* Header */
  .header {
    text-align: center;
    margin-bottom: 50px;
    animation: fadeDown 0.6s ease;
  }
  .logo-badge {
    display: inline-block;
    background: linear-gradient(135deg, var(--blue) 0%, var(--blue-glow) 100%);
    color: #fff;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 4px;
    padding: 5px 18px;
    border-radius: 2px;
    margin-bottom: 20px;
    text-transform: uppercase;
  }
  .header h1 {
    font-size: clamp(36px, 7vw, 64px);
    font-weight: 700;
    letter-spacing: 4px;
    text-transform: uppercase;
    line-height: 1;
    background: linear-gradient(135deg, #fff 0%, var(--blue-light) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .header p {
    margin-top: 14px;
    color: var(--muted);
    font-size: 15px;
    letter-spacing: 1px;
  }
  .divider {
    width: 80px;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--blue), transparent);
    margin: 20px auto;
  }

  /* Steps */
  .steps {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-bottom: 40px;
    flex-wrap: wrap;
  }
  .step {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 1px;
    color: var(--muted);
    text-transform: uppercase;
    transition: color 0.3s;
  }
  .step.active { color: var(--blue); }
  .step.done { color: var(--success); }
  .step-num {
    width: 26px; height: 26px;
    border-radius: 50%;
    border: 2px solid currentColor;
    display: flex; align-items: center; justify-content: center;
    font-size: 12px;
    font-weight: 700;
  }
  .step-line {
    width: 30px; height: 1px;
    background: var(--border);
  }

  /* Card */
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 36px;
    position: relative;
    overflow: hidden;
    animation: fadeUp 0.5s ease;
  }
  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--blue), transparent);
  }

  /* Welcome Screen */
  #welcome .welcome-icon {
    font-size: 56px;
    margin-bottom: 20px;
    text-align: center;
  }
  #welcome h2 {
    font-size: 28px;
    font-weight: 700;
    letter-spacing: 2px;
    text-align: center;
    margin-bottom: 14px;
  }
  #welcome .desc {
    color: var(--muted);
    line-height: 1.8;
    text-align: center;
    font-size: 15px;
    margin-bottom: 28px;
  }
  .info-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    margin-bottom: 32px;
  }
  .info-box {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px;
    text-align: center;
  }
  .info-box .num {
    font-size: 28px;
    font-weight: 700;
    color: var(--blue);
  }
  .info-box .label {
    font-size: 12px;
    color: var(--muted);
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-top: 4px;
  }

  /* Discord Input */
  .input-group {
    margin-bottom: 24px;
  }
  .input-group label {
    display: block;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 1px;
    color: var(--muted);
    text-transform: uppercase;
    margin-bottom: 8px;
  }
  .input-group input {
    width: 100%;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 14px 16px;
    color: var(--text);
    font-family: inherit;
    font-size: 15px;
    outline: none;
    transition: border-color 0.2s;
  }
  .input-group input:focus { border-color: var(--blue); }
  .input-group input::placeholder { color: var(--muted); }

  /* Button */
  .btn {
    display: block;
    width: 100%;
    padding: 16px;
    background: linear-gradient(135deg, var(--blue) 0%, var(--blue-glow) 100%);
    color: #fff;
    border: none;
    border-radius: 6px;
    font-family: inherit;
    font-size: 15px;
    font-weight: 700;
    letter-spacing: 3px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
  }
  .btn::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(255,255,255,0);
    transition: background 0.2s;
  }
  .btn:hover::after { background: rgba(255,255,255,0.08); }
  .btn:active { transform: scale(0.99); }
  .btn:disabled { opacity: 0.5; cursor: not-allowed; }

  /* Quiz */
  .quiz-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 28px;
  }
  .q-counter {
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 2px;
    color: var(--blue);
    text-transform: uppercase;
  }
  .timer {
    font-size: 22px;
    font-weight: 700;
    color: var(--text);
    font-variant-numeric: tabular-nums;
  }
  .timer.warning { color: var(--danger); animation: pulse 1s infinite; }

  .progress-bar {
    height: 3px;
    background: var(--border);
    border-radius: 2px;
    margin-bottom: 32px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--blue-glow), var(--blue));
    border-radius: 2px;
    transition: width 0.5s ease;
  }

  .question-text {
    font-size: 20px;
    font-weight: 600;
    line-height: 1.5;
    margin-bottom: 24px;
  }
  .question-ar {
    font-size: 17px;
    color: var(--muted);
    margin-top: 6px;
    font-family: 'Cairo', sans-serif;
    line-height: 1.6;
  }

  .options {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
  .option {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 16px 20px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 14px;
    position: relative;
    overflow: hidden;
  }
  .option:hover:not(.selected):not(.correct):not(.wrong) {
    border-color: var(--blue);
    background: rgba(59,158,255,0.05);
  }
  .option.selected { border-color: var(--blue); background: rgba(59,158,255,0.1); }
  .option.correct { border-color: var(--success); background: rgba(0,229,160,0.1); }
  .option.wrong { border-color: var(--danger); background: rgba(255,69,96,0.08); }
  .option-letter {
    width: 30px; height: 30px;
    border-radius: 4px;
    border: 1px solid var(--border);
    display: flex; align-items: center; justify-content: center;
    font-size: 13px;
    font-weight: 700;
    flex-shrink: 0;
    color: var(--muted);
    transition: all 0.2s;
  }
  .option.selected .option-letter { border-color: var(--blue); color: var(--blue); }
  .option.correct .option-letter { border-color: var(--success); color: var(--success); }
  .option.wrong .option-letter { border-color: var(--danger); color: var(--danger); }
  .option-text { font-size: 15px; font-weight: 600; flex: 1; }
  .option-text-ar { font-size: 13px; color: var(--muted); font-family: 'Cairo', sans-serif; }

  .next-btn-wrap { margin-top: 24px; }

  /* Result */
  .result-center { text-align: center; }
  .result-icon { font-size: 72px; margin-bottom: 20px; animation: bounceIn 0.6s ease; }
  .result-title { font-size: 32px; font-weight: 700; letter-spacing: 3px; margin-bottom: 10px; }
  .result-title.pass { color: var(--success); }
  .result-title.fail { color: var(--danger); }
  .score-display {
    font-size: 64px;
    font-weight: 700;
    margin: 20px 0;
    background: linear-gradient(135deg, var(--blue-light), var(--blue));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .result-msg {
    color: var(--muted);
    font-size: 15px;
    line-height: 1.8;
    margin-bottom: 32px;
  }
  .discord-info {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 24px;
    text-align: left;
    display: flex;
    align-items: center;
    gap: 14px;
  }
  .discord-icon { font-size: 30px; }
  .discord-info p { font-size: 13px; color: var(--muted); }
  .discord-info strong { color: var(--blue); font-size: 16px; }

  /* Hidden */
  .screen { display: none; }
  .screen.active { display: block; }

  /* Animations */
  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }
  @keyframes bounceIn {
    0% { transform: scale(0.5); opacity: 0; }
    70% { transform: scale(1.1); }
    100% { transform: scale(1); opacity: 1; }
  }

  @media (max-width: 500px) {
    .info-grid { grid-template-columns: repeat(3,1fr); }
    .card { padding: 24px 18px; }
    .question-text { font-size: 17px; }
  }
</style>
</head>
<body>

<div class="orb orb1"></div>
<div class="orb orb2"></div>

<div class="container">

  <!-- Lang Toggle -->
  <div class="lang-toggle">
    <button class="lang-btn active" onclick="setLang('en')">EN</button>
    <button class="lang-btn" onclick="setLang('ar')">AR</button>
  </div>

  <!-- Header -->
  <div class="header">
    <div class="logo-badge">FiveM Roleplay</div>
    <h1>HARD ROLE</h1>
    <div class="divider"></div>
    <p class="t" data-en="Complete the whitelist quiz to join our server" data-ar="Ø£ÙƒÙ…Ù„ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù‚Ø¨ÙˆÙ„ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø³ÙŠØ±ÙØ±Ù†Ø§"></p>
  </div>

  <!-- Steps -->
  <div class="steps">
    <div class="step active" id="step1">
      <div class="step-num">1</div>
      <span class="t" data-en="Register" data-ar="Ø§Ù„ØªØ³Ø¬ÙŠÙ„"></span>
    </div>
    <div class="step-line"></div>
    <div class="step" id="step2">
      <div class="step-num">2</div>
      <span class="t" data-en="Quiz" data-ar="Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±"></span>
    </div>
    <div class="step-line"></div>
    <div class="step" id="step3">
      <div class="step-num">3</div>
      <span class="t" data-en="Result" data-ar="Ø§Ù„Ù†ØªÙŠØ¬Ø©"></span>
    </div>
  </div>

  <!-- SCREEN 1: Welcome -->
  <div class="card screen active" id="welcome">
    <div class="welcome-icon">ğŸ®</div>
    <h2 class="t" data-en="WHITELIST APPLICATION" data-ar="Ø·Ù„Ø¨ Ø§Ù„ÙˆØ§ÙŠØª Ù„ÙŠØ³Øª"></h2>
    <div class="divider"></div>
    <p class="desc t" data-en="Welcome to Hard Role FiveM server. To gain access, you must pass our RP knowledge quiz. Read the rules carefully and answer honestly." data-ar="Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø³ÙŠØ±ÙØ± Hard Role. Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØµÙˆÙ„ØŒ ÙŠØ¬Ø¨ Ø£Ù† ØªØ¬ØªØ§Ø² Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹Ø±ÙØ© RP Ø§Ù„Ø®Ø§Øµ Ø¨Ù†Ø§. Ø§Ù‚Ø±Ø£ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø¨Ø¹Ù†Ø§ÙŠØ© ÙˆØ£Ø¬Ø¨ Ø¨ØµØ¯Ù‚."></p>

    <div class="info-grid">
      <div class="info-box">
        <div class="num">6</div>
        <div class="label t" data-en="Questions" data-ar="Ø£Ø³Ø¦Ù„Ø©"></div>
      </div>
      <div class="info-box">
        <div class="num">3</div>
        <div class="label t" data-en="To Pass" data-ar="Ù„Ù„Ù†Ø¬Ø§Ø­"></div>
      </div>
      <div class="info-box">
        <div class="num">5<span style="font-size:16px">m</span></div>
        <div class="label t" data-en="Time Limit" data-ar="Ø§Ù„ÙˆÙ‚Øª"></div>
      </div>
    </div>

    <div class="input-group">
      <label class="t" data-en="DISCORD USERNAME" data-ar="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯"></label>
      <input type="text" id="discordInput" placeholder="example#0001" />
    </div>

    <button class="btn" onclick="startQuiz()">
      <span class="t" data-en="START QUIZ" data-ar="Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±"></span>
    </button>
    <p id="attemptsInfo" style="text-align:center;margin-top:12px;font-size:13px;color:var(--muted);letter-spacing:1px;"></p>
  </div>

  <!-- SCREEN 2: Quiz -->
  <div class="card screen" id="quiz">
    <div class="quiz-header">
      <span class="q-counter" id="qCounter">Q 1 / 6</span>
      <span class="timer" id="timer">05:00</span>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>
    <div class="question-text" id="questionText"></div>
    <div class="options" id="optionsContainer"></div>
    <div class="next-btn-wrap">
      <button class="btn" id="nextBtn" onclick="nextQuestion()" style="display:none">
        <span class="t" data-en="NEXT QUESTION â†’" data-ar="Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ â†’"></span>
      </button>
    </div>
  </div>

  <!-- SCREEN 3: Result -->
  <div class="card screen" id="result">
    <div class="result-center">
      <div class="result-icon" id="resultIcon"></div>
      <div class="result-title" id="resultTitle"></div>
      <div class="score-display" id="scoreDisplay"></div>
      <p class="result-msg" id="resultMsg"></p>
      <div class="discord-info" id="discordInfo">
        <div class="discord-icon">ğŸ‘¤</div>
        <div>
          <p class="t" data-en="Discord Account" data-ar="Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯"></p>
          <strong id="discordName"></strong>
        </div>
      </div>
      <button class="btn" id="resultBtn" onclick="resetQuiz()">
        <span class="t" data-en="TRY AGAIN" data-ar="Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹"></span>
      </button>
    </div>
  </div>

</div>

<script>
// â”€â”€â”€ Language â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let lang = 'en';
function setLang(l) {
  lang = l;
  document.querySelectorAll('.lang-btn').forEach((b,i) => b.classList.toggle('active', (i===0&&l==='en')||(i===1&&l==='ar')));
  document.documentElement.setAttribute('dir', l === 'ar' ? 'rtl' : 'ltr');
  document.querySelectorAll('.t').forEach(el => {
    el.textContent = el.dataset[l] || el.dataset.en;
  });
  // refresh question if on quiz screen
  if (!document.getElementById('quiz').classList.contains('active')) return;
  renderQuestion();
}

// â”€â”€â”€ Questions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const questions = [
  {
    en: "A player runs up to you and says 'I just got shot, help me!' What should you do in proper RP?",
    ar: "Ù„Ø§Ø¹Ø¨ ÙŠØ¬Ø±ÙŠ Ù†Ø­ÙˆÙƒ ÙˆÙŠÙ‚ÙˆÙ„ 'Ø§Ù†Ø§ Ø§ØªØ¶Ø±Ø¨ØªØŒ Ø³Ø§Ø¹Ø¯Ù†ÙŠ!' Ù…Ø§Ø°Ø§ ØªÙØ¹Ù„ ÙÙŠ RP Ø§Ù„ØµØ­ÙŠØ­ØŸ",
    options: [
      { en: "Ignore them and continue what you're doing", ar: "ØªØ¬Ø§Ù‡Ù„Ù‡ ÙˆØ§Ù„Ø§Ø³ØªÙ…Ø±Ø§Ø± ÙÙŠ Ù…Ø§ ØªÙØ¹Ù„Ù‡" },
      { en: "Engage in character and offer help or call EMS", ar: "Ø§Ù„ØªÙØ§Ø¹Ù„ Ø¨Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£Ùˆ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ EMS" },
      { en: "Tell them it's just a game OOC", ar: "Ø¥Ø®Ø¨Ø§Ø±Ù‡ Ø£Ù†Ù‡Ø§ Ù…Ø¬Ø±Ø¯ Ù„Ø¹Ø¨Ø© Ø¨Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´Ø®ØµÙŠØ©" },
      { en: "Shoot them again for fun", ar: "Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù†Ø§Ø± Ø¹Ù„ÙŠÙ‡ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ Ù„Ù„Ù…ØªØ¹Ø©" }
    ],
    correct: 1
  },
  {
    en: "What does 'RDM' (Random Death Match) mean in FiveM RP?",
    ar: "Ù…Ø§ Ù…Ø¹Ù†Ù‰ 'RDM' ÙÙŠ FiveM RPØŸ",
    options: [
      { en: "Robbing during missions", ar: "Ø§Ù„Ø³Ø·Ùˆ Ø®Ù„Ø§Ù„ Ø§Ù„Ù…Ù‡Ø§Ù…" },
      { en: "Killing another player without any valid RP reason", ar: "Ù‚ØªÙ„ Ù„Ø§Ø¹Ø¨ Ø¢Ø®Ø± Ø¨Ø¯ÙˆÙ† Ø³Ø¨Ø¨ RP Ù…Ù‚Ø¨ÙˆÙ„" },
      { en: "A roleplay event type", ar: "Ù†ÙˆØ¹ Ù…Ù† Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø¯ÙˆØ±ÙŠ" },
      { en: "Respawning at the death match zone", ar: "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¸Ù‡ÙˆØ± ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…ÙˆØª" }
    ],
    correct: 1
  },
  {
    en: "You witness a car accident in the RP world. As a civilian, the best RP action is?",
    ar: "Ø´Ù‡Ø¯Øª Ø­Ø§Ø¯Ø« Ø³ÙŠØ§Ø±Ø© ÙÙŠ Ø¹Ø§Ù„Ù… RP. ÙƒÙ…Ø¯Ù†ÙŠØŒ Ù…Ø§ Ù‡Ùˆ Ø£ÙØ¶Ù„ ØªØµØ±ÙØŸ",
    options: [
      { en: "Drive past without stopping", ar: "Ø§Ù„Ù…Ø±ÙˆØ± Ø¯ÙˆÙ† ØªÙˆÙ‚Ù" },
      { en: "Call 911 (police/EMS) in character", ar: "Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø´Ø®ØµÙŠØ©" },
      { en: "Loot the crashed car immediately", ar: "Ù†Ù‡Ø¨ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø§Ù„Ù…Ø­Ø·Ù…Ø© ÙÙˆØ±Ø§Ù‹" },
      { en: "Quit the game to avoid the situation", ar: "Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ù" }
    ],
    correct: 1
  },
  {
    en: "What is 'Metagaming' in roleplay?",
    ar: "Ù…Ø§ Ù‡Ùˆ 'Metagaming' ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø¯ÙˆØ±ÙŠØŸ",
    options: [
      { en: "Playing the game at a high skill level", ar: "Ø§Ù„Ù„Ø¹Ø¨ Ø¨Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¹Ø§Ù„ÙŠØ©" },
      { en: "Using out-of-character information inside the roleplay", ar: "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´Ø®ØµÙŠØ© Ø¯Ø§Ø®Ù„ Ø§Ù„Ù„Ø¹Ø¨" },
      { en: "Creating your own server mods", ar: "Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆØ¯Ø§Øª Ø®Ø§ØµØ© Ø¨Ùƒ" },
      { en: "A type of PvP strategy", ar: "Ù†ÙˆØ¹ Ù…Ù† Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª PvP" }
    ],
    correct: 1
  },
  {
    en: "A cop pulls you over. In proper RP, what should you do?",
    ar: "Ø´Ø±Ø·ÙŠ Ø£ÙˆÙ‚ÙÙƒ. ÙÙŠ RP Ø§Ù„ØµØ­ÙŠØ­ØŒ Ù…Ø§Ø°Ø§ ØªÙØ¹Ù„ØŸ",
    options: [
      { en: "Immediately drive away at full speed", ar: "Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø¨Ø³Ø±Ø¹Ø© Ù‚ØµÙˆÙ‰ ÙÙˆØ±Ø§Ù‹" },
      { en: "Pull over, stay in character and interact with the officer", ar: "Ø§Ù„ØªÙˆÙ‚Ù ÙˆØ§Ù„Ø¨Ù‚Ø§Ø¡ ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ø¶Ø§Ø¨Ø·" },
      { en: "Log out of the game", ar: "Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ù„Ø¹Ø¨Ø©" },
      { en: "Attack the cop immediately", ar: "Ù…Ù‡Ø§Ø¬Ù…Ø© Ø§Ù„Ø´Ø±Ø·ÙŠ ÙÙˆØ±Ø§Ù‹" }
    ],
    correct: 1
  },
  {
    en: "What does 'staying in character' mean during a roleplay scenario?",
    ar: "Ù…Ø§Ø°Ø§ ÙŠØ¹Ù†ÙŠ 'Ø§Ù„Ø¨Ù‚Ø§Ø¡ ÙÙŠ Ø§Ù„Ø´Ø®ØµÙŠØ©' Ø£Ø«Ù†Ø§Ø¡ Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ø¯ÙˆØ±ÙŠØŸ",
    options: [
      { en: "Only speaking in your native language", ar: "Ø§Ù„ØªØ­Ø¯Ø« Ø¨Ù„ØºØªÙƒ Ø§Ù„Ø£ØµÙ„ÙŠØ© ÙÙ‚Ø·" },
      { en: "Acting and speaking as your RP character, not as yourself", ar: "Ø§Ù„ØªØµØ±Ù ÙˆØ§Ù„ØªØ­Ø¯Ø« ÙƒØ´Ø®ØµÙŠØªÙƒ ÙÙŠ RPØŒ ÙˆÙ„ÙŠØ³ ÙƒÙ†ÙØ³Ùƒ" },
      { en: "Playing the same character model every session", ar: "Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†ÙØ³ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙÙŠ ÙƒÙ„ Ø¬Ù„Ø³Ø©" },
      { en: "Never changing your character's job", ar: "Ø¹Ø¯Ù… ØªØºÙŠÙŠØ± ÙˆØ¸ÙŠÙØ© Ø´Ø®ØµÙŠØªÙƒ Ø£Ø¨Ø¯Ø§Ù‹" }
    ],
    correct: 1
  }
];

// â”€â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let currentQ = 0;
let score = 0;
let selected = null;
let timerInterval = null;
let timeLeft = 300;
let discordUser = '';

// â”€â”€â”€ Start â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// â”€â”€â”€ Cooldown â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let cooldownTimer = null;

async function checkCooldown() {
  try {
    const res = await fetch('/api/cooldown');
    const data = await res.json();
    if (data.onCooldown) { showCooldownUI(data.remaining); return true; }
    const attemptsLeft = data.maxAttempts - data.attempts;
    const el = document.getElementById('attemptsInfo');
    if (el) el.textContent = (document.documentElement.getAttribute('dir')==='rtl')
      ? `Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${attemptsLeft} / ${data.maxAttempts}`
      : `Attempts remaining: ${attemptsLeft} / ${data.maxAttempts}`;
    return false;
  } catch(e) { return false; }
}

function showCooldownUI(seconds) {
  const btn = document.querySelector('#welcome .btn');
  const el = document.getElementById('attemptsInfo');
  if (cooldownTimer) clearInterval(cooldownTimer);
  let remaining = seconds;
  function update() {
    const m = Math.floor(remaining/60).toString().padStart(2,'0');
    const s = (remaining%60).toString().padStart(2,'0');
    if (btn) { btn.disabled = true; btn.querySelector('span').textContent = `â³ ${m}:${s}`; }
    if (el) el.textContent = (document.documentElement.getAttribute('dir')==='rtl')
      ? `â›” Ù…Ø­Ø¸ÙˆØ± Ù…Ø¤Ù‚ØªØ§Ù‹ - Ø§Ù†ØªØ¸Ø± ${m}:${s}`
      : `â›” On cooldown - wait ${m}:${s}`;
    if (remaining <= 0) {
      clearInterval(cooldownTimer);
      if (btn) { btn.disabled = false; btn.querySelector('span').textContent = (document.documentElement.getAttribute('dir')==='rtl') ? 'Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±' : 'START QUIZ'; }
      if (el) el.textContent = (document.documentElement.getAttribute('dir')==='rtl') ? 'Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: 3 / 3' : 'Attempts remaining: 3 / 3';
    }
    remaining--;
  }
  update();
  cooldownTimer = setInterval(update, 1000);
}

async function startQuiz() {
  discordUser = document.getElementById('discordInput').value.trim();
  if (!discordUser) {
    document.getElementById('discordInput').focus();
    document.getElementById('discordInput').style.borderColor = 'var(--danger)';
    setTimeout(() => document.getElementById('discordInput').style.borderColor = '', 1500);
    return;
  }
  const onCooldown = await checkCooldown();
  if (onCooldown) return;
  currentQ = 0; score = 0; timeLeft = 300;
  showScreen('quiz');
  updateStep(2);
  startTimer();
  renderQuestion();
}

window.addEventListener('load', () => checkCooldown());

function startTimer() {
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timeLeft--;
    updateTimerDisplay();
    if (timeLeft <= 0) { clearInterval(timerInterval); showResult(); }
  }, 1000);
}

function updateTimerDisplay() {
  const m = Math.floor(timeLeft / 60).toString().padStart(2,'0');
  const s = (timeLeft % 60).toString().padStart(2,'0');
  const el = document.getElementById('timer');
  el.textContent = `${m}:${s}`;
  el.classList.toggle('warning', timeLeft <= 30);
}

// â”€â”€â”€ Render Question â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderQuestion() {
  if (currentQ >= questions.length) { clearInterval(timerInterval); showResult(); return; }
  const q = questions[currentQ];
  selected = null;
  document.getElementById('qCounter').textContent = `Q ${currentQ+1} / ${questions.length}`;
  document.getElementById('progressFill').style.width = `${(currentQ/questions.length)*100}%`;
  document.getElementById('nextBtn').style.display = 'none';

  const qText = document.getElementById('questionText');
  qText.innerHTML = `${q[lang] || q.en}<div class="question-ar">${lang==='en' ? q.ar : ''}</div>`;
  if (lang === 'ar') qText.innerHTML = q.ar;

  const container = document.getElementById('optionsContainer');
  container.innerHTML = '';
  const letters = ['A','B','C','D'];
  q.options.forEach((opt, i) => {
    const div = document.createElement('div');
    div.className = 'option';
    div.onclick = () => selectOption(i);
    const text = lang === 'ar' ? opt.ar : opt.en;
    const sub = lang === 'ar' ? '' : `<div class="option-text-ar">${opt.ar}</div>`;
    div.innerHTML = `
      <div class="option-letter">${letters[i]}</div>
      <div>
        <div class="option-text">${text}</div>
        ${sub}
      </div>`;
    container.appendChild(div);
  });
}

function selectOption(i) {
  if (selected !== null) return;
  selected = i;
  const q = questions[currentQ];
  const opts = document.querySelectorAll('.option');
  opts[i].classList.add(i === q.correct ? 'correct' : 'wrong');
  if (i !== q.correct) opts[q.correct].classList.add('correct');
  if (i === q.correct) score++;
  document.getElementById('nextBtn').style.display = 'block';
}

function nextQuestion() {
  currentQ++;
  renderQuestion();
}

// â”€â”€â”€ Result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showResult() {
  clearInterval(timerInterval);
  updateStep(3);
  showScreen('result');
  const passed = score >= 3;
  document.getElementById('resultIcon').textContent = passed ? 'âœ…' : 'âŒ';
  document.getElementById('resultTitle').textContent = passed
    ? (lang==='ar' ? 'Ù†Ø¬Ø­Øª! Ù…Ø¨Ø±ÙˆÙƒ' : 'PASSED!')
    : (lang==='ar' ? 'Ù„Ù… ØªÙ†Ø¬Ø­' : 'FAILED');
  document.getElementById('resultTitle').className = 'result-title ' + (passed ? 'pass' : 'fail');
  document.getElementById('scoreDisplay').textContent = `${score} / ${questions.length}`;
  document.getElementById('discordName').textContent = discordUser;
  document.getElementById('resultMsg').textContent = passed
    ? (lang==='ar'
      ? `Ø£Ø­Ø³Ù†Øª! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${score} Ù…Ù† ${questions.length}. Ø³ÙŠØªÙ… Ù…Ù†Ø­Ùƒ Ø±ØªØ¨Ø© ÙÙŠ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±.`
      : `Great job! You scored ${score}/${questions.length}. You will receive your Discord role shortly to access the server.`)
    : (lang==='ar'
      ? `Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${score} Ù…Ù† ${questions.length}. ØªØ­ØªØ§Ø¬ 3 Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„Ù„Ù†Ø¬Ø§Ø­. Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ Ø¨Ø¹Ø¯ Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‚ÙˆØ§Ø¹Ø¯ RP.`
      : `You scored ${score}/${questions.length}. You need at least 3 correct answers to pass. Review the RP rules and try again.`);
  document.getElementById('resultBtn').querySelector('span').textContent = lang==='ar' ? 'Ø­Ø§ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹' : 'TRY AGAIN';

  // Submit to backend
  submitResult(discordUser, score, passed);
}

async function submitResult(user, score, passed) {
  try {
    const res = await fetch('/api/whitelist', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ discord: user, score, passed })
    });
    const data = await res.json();
    const msgEl = document.getElementById('resultMsg');
    const btn = document.querySelector('#welcome .btn');

    if (passed && data.success) {
      msgEl.textContent = lang === 'ar'
        ? 'ğŸ‰ ØªÙ… Ù…Ù†Ø­ Ø§Ù„Ø±ØªØ¨Ø© ÙÙŠ Ø§Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙŠØ±ÙØ±.'
        : 'ğŸ‰ Discord role has been assigned! You can now join the server.';
    } else if (passed && !data.success) {
      msgEl.textContent = (lang === 'ar' ? 'ØªÙ†Ø¨ÙŠÙ‡: ' : 'Note: ') + data.message;
    } else if (!passed && data.cooldown) {
      // cooldown applied
      const mins = Math.ceil(data.remaining / 60);
      msgEl.textContent = lang === 'ar'
        ? `â›” ÙØ´Ù„Øª 3 Ù…Ø±Ø§Øª. Ø§Ù„ÙƒÙˆÙ„Ø¯Ø§ÙˆÙ† ${mins} Ø¯Ù‚ÙŠÙ‚Ø©.`
        : `â›” Failed 3 times. Cooldown of ${mins} minutes applied.`;
      document.getElementById('resultBtn').style.display = 'none';
      // show countdown on welcome for when they go back
      setTimeout(() => checkCooldown(), 100);
    } else if (!passed) {
      const left = data.maxAttempts - data.attempts;
      msgEl.textContent = lang === 'ar'
        ? `Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©: ${left} / ${data.maxAttempts}`
        : `Attempts remaining: ${left} / ${data.maxAttempts}`;
    }
  } catch (e) {
    console.error('API error:', e);
  }
}

function resetQuiz() {
  showScreen('welcome');
  updateStep(1);
}

// â”€â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}
function updateStep(n) {
  document.querySelectorAll('.step').forEach((s,i) => {
    s.classList.remove('active','done');
    if (i+1 < n) s.classList.add('done');
    else if (i+1 === n) s.classList.add('active');
  });
}

// Init text
document.querySelectorAll('.t').forEach(el => {
  el.textContent = el.dataset.en;
});
updateTimerDisplay();
</script>
</body>
</html>
